<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galaxy Instance Testing &middot; 3bf57cec3c37</title>

    <meta name="description" content="Short post about tools for testing Galaxy Instances">

    <meta name="generator" content="Hugo 0.17" />
    <meta name="twitter:card" content="summary">
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://erasche.github.io//css/all.min.css">
    <link rel="stylesheet" href="https://erasche.github.io//assets/main.css">
    <link rel="alternate" type="application/rss+xml" title="3bf57cec3c37" href="https://erasche.github.io//index.xml" />

    <meta name="theme-color" content="#3d4f5d">
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            
            <img src="https://erasche.github.io/assets/pics/me3.png" width="80%" style="max-width: 240px;">
            
            <h1 class="brand-title"><a href="https://erasche.github.io/">3bf57cec3c37</a></h1>
            <h2 class="brand-tagline"></h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a class="pure-button" href="https://erasche.github.io//index.xml"><i class="fa fa-rss"></i> RSS</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/Eric_Rasche"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/erasche "><i class="fa fa-github-alt"></i> GitHub</a>
                </li>
                
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4" style="padding: 0;">
        <div class="size-chart pure-g">
	<a class="size-chart-item" href="https://erasche.github.io/" style="width: 20%;background: #1f8dd6; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Home
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/post/" style="width: 20%;background: #265778; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Blog
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/talks/" style="width: 20%;background: #5eb95e; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Talks
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/software/" style="width: 20%;background: #dd514c; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Software
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/assets/rasche_cv.pdf" style="width: 20%;background: rgb(243, 123, 29); color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Resume
			</span>
		</div>
	</a>
</div>

        <div style="padding-left: 1em; padding-right: 1em; margin-left: auto; margin-right: auto;">
            
            <div class="posts">
                <h1 class="content-subhead">2017-01-07 07:01:33 &#43;0000 UTC</h1>
                <section class="post">
                    <header class="post-header">

                        <div>
                            
                            <a href="https://erasche.github.io/post/2017-01-07-galaxy-instance-testing/" class="post-title">Galaxy Instance Testing</a>
                        </div>
                        
                        <div>
                            <a href="https://github.com/TAMU-CPT/galaxy-workflow-import-tester" style="text-decoration: none">
                                <img src="https://img.shields.io/badge/repo-TAMU_CPT/galaxy_workflow_import_tester-green.svg?style=flat-square">
                            </a>
                            <a href="https://github.com/TAMU-CPT/galaxy-workflow-import-tester" style="text-decoration: none">
                                <img src="https://img.shields.io/github/license/TAMU-CPT/galaxy-workflow-import-tester.svg?style=flat-square">
                            </a>
                        </div>
                        



                        <div>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/galaxy">galaxy</a>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/testing">testing</a>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/dev">dev</a>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/work">work</a>
                            
                        </div>

                        <div id="toc" class="pure-u-1">
                            <nav id="TableOfContents">
<ul>
<li><a href="#problem">Problem</a></li>
<li><a href="#solution">Solution</a></li>
<li><a href="#jenkins-integration">Jenkins Integration</a></li>
</ul>
</nav>
                        </div>
                    </header>
                    <div class="post-description">
                        

<h1 id="problem">Problem</h1>

<p>I recently found that some of my org&rsquo;s old workflows were not importable
due to bad practices (changing tool IDs, deprecated tools, etc).</p>

<h1 id="solution">Solution</h1>

<p>Naturally, we threw together a simple tool to verify that all of the
workflows could safely be imported. Using a test user account, it runs:</p>

<div class="highlight" style="background: #f0f0f0"><pre style="line-height: 125%"><span style="color: #60a0b0; font-style: italic"># Remove old workflows to ensure test only tests latest version of each</span>
<span style="color: #60a0b0; font-style: italic"># workflow</span>
remove_all_workflows()
<span style="color: #60a0b0; font-style: italic"># Import all public workflows</span>
<span style="color: #007020; font-weight: bold">for</span> workflow <span style="color: #007020; font-weight: bold">in</span> import_shared_workflows():
    <span style="color: #60a0b0; font-style: italic"># Try accessing the JSON workflow representation. Bioblend throws an error when </span>
    <span style="color: #007020; font-weight: bold">try</span>:
        workflow<span style="color: #666666">.</span>get_json()
        xunit<span style="color: #666666">.</span>ok()
    <span style="color: #007020; font-weight: bold">except</span> <span style="color: #007020">Exception</span>:
        xunit<span style="color: #666666">.</span>fail()
</pre></div>


<h1 id="jenkins-integration">Jenkins Integration</h1>

<p>We added JUnit output for easy Jenkins integration. <a href="https://cpt.tamu.edu/jenkins/job/galaxy-workflow-import-test/"><img src="https://cpt.tamu.edu/jenkins/buildStatus/icon?job=galaxy-workflow-import-test" alt="Build Status" /></a></p>

<div class="pure-g well">
    <div class="pure-u-1">
        <div class="l-box well-title">
            Jenkins Output
        </div>
    </div>
    <div class="pure-u-1" style="text-align:center">
        <img src="https://erasche.github.io/assets/img/galaxy-testing-jenkins.png" width="100%" style="max-width: 602px"/>
    </div>
    <div class="pure-u-1">
        <div class="l-box">
            The failed test reuslts include the workflow name which
            allows you to easily track down the workflows which failed
            to import correctly. With Jenkins you can track failures
            over time, and send alerts when failures occur.
        </div>
    </div>
</div>

                    </div>
                </section>
            </div>
            <div class="footer well">
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
			<div>
				<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 Intl</a>
			</div>
			<div>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></div>
	</div>
</div>

        </div>
    </div>
</div>
</body>
</html>
