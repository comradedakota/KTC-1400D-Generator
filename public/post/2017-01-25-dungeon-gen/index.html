<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dungeon Generation &middot; 3bf57cec3c37</title>

    <meta name="description" content="">

    <meta name="generator" content="Hugo 0.17" />
    <meta name="twitter:card" content="summary">
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">

    <link rel="stylesheet" href="https://erasche.github.io//css/all.min.css">
    <link rel="stylesheet" href="https://erasche.github.io//assets/main.css">
    <link rel="alternate" type="application/rss+xml" title="3bf57cec3c37" href="https://erasche.github.io//index.xml" />

    <meta name="theme-color" content="#3d4f5d">
</head>
<body>


<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
    <div class="header">
        <hgroup>
            
            <img src="https://erasche.github.io/assets/pics/me3.png" width="80%" style="max-width: 240px;" alt="A stylised picture of the author">
            
            <h1 class="brand-title"><a href="https://erasche.github.io/">3bf57cec3c37</a></h1>
            <h2 class="brand-tagline"> 5b ee ac c1° 3f 5c 80 42° </h2>
        </hgroup>

        <nav class="nav">
            <ul class="nav-list">
                <li class="nav-item">
                    <a class="pure-button" href="https://erasche.github.io//index.xml"><i class="fa fa-rss"></i> RSS</a>
                </li>
                
                <li class="nav-item">
                    <a class="pure-button" href="https://twitter.com/Eric_Rasche"><i class="fa fa-twitter"></i> Twitter</a>
                </li>
                
                
                <li class="nav-item">
                    <a class="pure-button" href="https://github.com/erasche "><i class="fa fa-github-alt"></i> GitHub</a>
                </li>
                
            </ul>
        </nav>
    </div>
</div>


    <div class="content pure-u-1 pure-u-md-3-4" style="padding: 0;">
        <div class="size-chart pure-g">
	<a class="size-chart-item" href="https://erasche.github.io/" style="width: 20%;background: #1f8dd6; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Home
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/post/" style="width: 20%;background: #265778; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Blog
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/talks/" style="width: 20%;background: #5eb95e; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Talks
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/software/" style="width: 20%;background: #dd514c; color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Software
			</span>
		</div>
	</a>
	<a class="size-chart-item" href="https://erasche.github.io/assets/rasche_cv.pdf" style="width: 20%;background: rgb(243, 123, 29); color: white; padding: 1em">
		<div class="size-chart-base pure-u">
			<span class="size-chart-label">
				Resume
			</span>
		</div>
	</a>
</div>

        <div style="padding-left: 1em; padding-right: 1em; margin-left: auto; margin-right: auto;">
            
            <div class="posts">
                <h1 class="content-subhead">2017-01-25 02:07:15 &#43;0000 UTC</h1>
                <section class="post">
                    <header class="post-header">

                        <div>
                            
                            <a href="https://erasche.github.io/post/2017-01-25-dungeon-gen/" class="post-title">Dungeon Generation</a>
                        </div>
                        



                        <div>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/gamedev">gamedev</a>
                            
                            <a class="pure-button button-secondary" href="https://erasche.github.io/tags/mapgen">mapgen</a>
                            
                        </div>

                        <div id="toc" class="pure-u-1">
                            
                        </div>
                    </header>
                    <div class="post-description">
                        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.4.1/d3.min.js" integrity="sha256-4mL8TQfOJSbg0f42dQw5cKLl2ngQXUSXqfQnvK11M44=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

<p>Found <a href="http://www.gamasutra.com/blogs/AAdonaac/20150903/252889/Procedural_Dungeon_Generation_Algorithm.php">this</a>
blog post, so we&rsquo;re going to re-implement that in JS as well. This looks very
promising for building rooms/dungeons for red-eclipse.</p>

<div id="plots">
</div>

<script src="https://erasche.github.io/js/bboxCollide.js"></script>
<script type="text/javascript">
// Adapt to viewport
var width = $('section.post').width();
// These plots are mostly a 1:1 ratio.
var height = width;

var width = 400;
var height = 400;

// Setup the SVG object on the page
function _prep_svg(){
    var svg = d3.select("#plots").append('svg')
        .attr("width", width)
        .attr("height", height);
    return svg;
}

// Setup various objects needed by all the plot functions
function _prep_plot(){

    return [x, y, area];
}

function getRandomArbitrary(min, max) {
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
    return Math.random() * (max - min) + min;
}

function getRandomPointInCircle(radius){
    var t = 2 * Math.PI * Math.random(),
        u = Math.random() + Math.random(),
        r = null;

    if(u > 1){
        r = 2 - u;
    } else {
        r = u;
    }
    return [
        Math.round(radius * r * Math.cos(t)),
        Math.round(radius * r * Math.sin(t))
    ];
}

// And lastly fully imitate the original.
var svg = _prep_svg();

var rectangles = [];

var x = d3.scaleLinear().range([-width / 2, width/2]),
    y = d3.scaleLinear().range([-height / 2, height/2]);


function rad2deg(rad){
    return rad * (180 / Math.PI);
}


for(var i = 0; i < 15; i++){
    var [x, y] = getRandomPointInCircle(128);
    var w = Math.round(getRandomArbitrary(20, 85));
    var h = Math.round(getRandomArbitrary(20, 85));
    var node = {
        x: x - w / 2,
        y: y - h / 2,
        cx: x,
        cy: y,
        w: w,
        h: h,
        theta: Math.atan2(x, y),
    };
    rectangles.push(node);
}

var main = svg.append('g').attr('transform', 'translate(200, 200)');

function update(){
    main.selectAll('g')
    .data(rectangles)
    .enter()
        .append('rect')
        .attr("x", function(d){ return d.x})
        .attr("y", function(d){ return d.y})
        .attr("width", function(d){ return d.w})
        .attr("height", function(d){ return d.h})
        .attr("stroke", "black")
        .attr("fill", "red");
}

function centerToCentroid(rect){
    //console.log(rect);
}


function intersect(a, b) {
    return (
        a.x <= b.x + b.width &&
        b.x <= a.x + a.width &&
        a.y <= b.y + b.height &&
        b.y <= a.y + a.height
    )
}

function tick(){
    for(var i = 0; i < rectangles.length; i++){
        rectangles[i].x += 10;
        //for(var j = 0; j < rectangles.length; j++){
        //  console.log(intersect(rectangles[i], rectangles[j]))
        //}
    }
}
tick();
update();




</script>

                    </div>
                </section>
            </div>
            <div class="footer well">
	<div class="pure-menu pure-menu-horizontal pure-menu-open">
			<div>
				<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0 Intl</a>
			</div>
			<div>Powered by <a class="hugo" href="https://gohugo.io/" target="_blank">hugo</a></div>
	</div>
</div>

        </div>
    </div>
</div>
</body>
</html>
